
<p>My server got hacked in February. I don't know how the intruders got
in. I have learned a few things in the process of cleaning things
up. First keep Debian updated with the latest stable release. I was
running version 4.0 which didn't benefit from security updates
anymore.</p>

<p>Next you'll want to install the following packages and configure them
so that you get daily e-mails.</p>

<pre class="example">
rkhunter
chkrootkit
aide
logwatch
</pre>

<p>The first two are root kit detectors and will alert you if you get
infected. The software aide will report all files
changed and logwatch sends parts of logs that are interesting.</p>

<p>Running aide &mdash;init gives the most stupid warning:</p>

<pre class="example">
aide --init
Couldn't open file /var/lib/aide/please-dont-call-aide-without-parameters/aide.db.new for writing
</pre>

<p>It turns out on Debian you must run the following command:</p>

<pre class="example">
aideinit
</pre>

<p>On top of this you should run the following script every day with cron:</p>

<pre class="example">
#!/bin/sh

apt-get -y update &gt; /dev/null 2&gt;&amp;1
apt-get -y upgrade &gt; /dev/null 2&gt;&amp;1
debsums 2&gt; /dev/null | grep FAILED
netstat
</pre>

<p>It will update the security updates from Debian. Debsums showed me
that my sshd was compromised so it's a good idea too. Running netstat
showed me that people were accessing my server via IRC.</p>

<p>Linux is not as safe as advertised, keep up to date!</p>

