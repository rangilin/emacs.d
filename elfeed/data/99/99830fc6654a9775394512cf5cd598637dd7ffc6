<p>Font locking (aka syntax highlighting) is an essential part of any Emacs major mode. While Emacs has great facilities to implement syntax highlighting, these are not always easy to understand and implement.</p>
<p>This post is the start of an article series about font locking that aims to give a little overview about various font locking techniques in Emacs. In essence, it’s a summary of what I discovered and learned recently while refactoring and improving font locking in <a href="https://github.com/lunaryorn/puppet-mode">Puppet Mode</a>.</p>
<p>As such, the examples throughout this series are about Puppet Mode. If you are not familiar with Puppet, you may want take a short look at the <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_visual_index.html">Puppet language reference</a> first.</p>
<h1 id="overview">Overview</h1>
<p>Emacs has two major facilities for syntax highlighting:</p>
<dl>
<dt>Syntax Tables</dt>
<dd><p>Simple generic and stateless highlighting for strings and comments by classifying individual characters.</p>
<p>Most major modes make use of this basic facility for strings and comments.</p>
</dd>
<dt>Font Lock Keywords</dt>
<dd><p>Stateless highlighting based on regular expressions, for specific syntactic elements of the target language.</p>
<p>This is the major workhorse of font lock, used by every major mode.</p>
</dd>
</dl>
<p>Both facilities are <em>stateless</em>, and cannot look at syntactic context. However, by means of <a href="http://doc.endlessparentheses.com/Var/syntax-propertize-function"><code>syntax-propertize-function</code></a> Emacs allows major modes to hook into its syntactic analysis, to add arbitrary text properties and syntax classifiers to buffer text.</p>
<p>This is the most powerful, but also the most tricky syntax highlighting feature of Emacs. As such, it’s not frequently used, but sometimes it’s necessary<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>, and often it makes the difference between good and great syntax highlighting<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>.</p>
<h1 id="articles">Articles</h1>
<p>In this series, I’ll cover all of these three ways of font locking:</p>
<ol type="1">
<li><a href="/2014/03/12/syntactic-fontification-in-emacs.html">Syntactic Fontification in Emacs</a></li>
<li><a href="/2014/03/26/search-based-fontification-with-keywords.html">Search Based Fontification with Keywords</a></li>
<li><a href="/2014/06/16/advanced-syntactic-fontification.html">Advanced syntactic fontification</a></li>
</ol>
<p>I’ll update this post as new articles in this series appear.</p>
<p>Enjoy this series, and feel free to ask me any questions or give me feedback. At best, ping me on <a href="https://twitter.com/lunaryorn">Twitter</a> or <a href="https://github.com/lunaryorn/blog/issues">open an issue</a>.</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Python Mode needs to use this feature to fontify triple-quoted strings.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Ruby mode uses this feature to fontify variable expansions inside double-quoted strings.<a href="#fnref2">↩</a></p></li>
</ol>
</section>