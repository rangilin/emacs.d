<p>I&#8217;ve written in the past about
<a href="http://emacsredux.com/blog/2013/03/29/automatic-electric-indentation/">electric-indent-mode</a>,
which was added in Emacs 24.1. In Emacs 24.4 one of the most prominent
user visible changes is that it&#8217;s enabled out-of-the box. That&#8217;s a
huge step towards the &#8220;modernization&#8221; of Emacs and one of the bigger
changes to the defaults in recent times. Let&#8217;s review briefly how the
mode works with a couple of Ruby examples (<code>|</code> signifies the cursor
position). Without <code>electric-indent-mode</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">something</span><span class="o">|</span>
</span></code></pre></td></tr></table></div></figure>


<p>After you press <code>Return</code> you&#8217;ll get:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">something</span>
</span><span class='line'><span class="o">|</span>
</span></code></pre></td></tr></table></div></figure>


<p>With it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">something</span><span class="o">|</span>
</span></code></pre></td></tr></table></div></figure>


<p>After you press <code>Return</code> you&#8217;ll get:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">something</span>
</span><span class='line'>  <span class="o">|</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nice, ah?</p>

<p>One problem with <code>electric-indent-mode</code> is that it doesn&#8217;t play nice
with some (mostly third-party) modes (<code>yaml-mode</code>, <code>slim-mode</code>,
etc). I guess the situation will improve over time, but for now you
can simply disable the mode in such problematic cases:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;yaml-mode-hook</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">electric-indent-local-mode</span> <span class="mi">-1</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note that <code>electric-indent-local-mode</code> was introduced in Emacs 24.4.</p>

<p>If you want to make a major mode electric-indent aware, have a look at
the documentation of <code>electric-indent-functions</code> and
<code>electric-indent-chars</code>.</p>

<p><strong>P.S.</strong></p>

<p>Dmitry Gutov recently wrote
<a href="http://dgutov.github.io/blog/2014/01/20/electric-indentation-in-ruby-in-emacs-24-dot-4/">more on the topic</a>
in the context of <code>ruby-mode</code> in Emacs 24.4.</p>
