<p>It's always an hateful job to correct <a href="http://www.python.org/dev/peps/pep-0008/">PEP8</a> warnings manually. </p>

<figure class="figure-code code"><figcaption><span>
</span></figcaption><div class="highlight"><pre>$ flake8 billy --ignore=E501,W293
billy/tests/integration/test_basic.py:401:45: W291 trailing whitespace
billy/models/processors/balanced_payments.py:116:44: W291 trailing whitespace
billy/models/processors/balanced_payments.py:133:30: W291 trailing whitespace
</pre></div>
</figure><p>I bet you don't like this either. Today I cannot take it anymore. I was wondering, why I should do this thing machine should do? So I seek solutions on the Internet, and I found an article looks helpful - <a href="http://signal0.com/2012/07/11/syntax_pep8_checking_before_committing_in_git.html">Syntax+pep8 checking before committing in git</a>. The basic idea is to add a pre-commit hook script to git for checking PEP8 syntax before commit. By doing that, you cannot commit code with PEP8 warnings anymore, when you do, you see errors like this</p>

<figure class="figure-code code"><figcaption><span>
</span></figcaption><div class="highlight"><pre>$ git commit
billy/tests/integration/test_basic.py:401:45: W291 trailing whitespace
billy/models/processors/balanced_payments.py:116:44: W291 trailing whitespace
billy/models/processors/balanced_payments.py:133:30: W291 trailing whitespace

</pre></div>
</figure><p>Which is great, but still, you need to correct these syntax issues manually. I thought there must be something can do these boring job for you. And yes, I found <a href="https://pypi.python.org/pypi/autopep8/">autopep8</a>. I can use <code>autopep8</code> in pre-commit hook to correct PEP8 issues for me. However, I don't think it is a good idea to let code formatting tool modifies your code silently when committing. I want to know what is modified by the tool. So here comes another solution, I use <code>post-commit</code> hook instead to compare the latest commit with previous commit:</p>

<figure class="figure-code code"><figcaption><span>
</span></figcaption><div class="highlight"><pre>#!/bin/sh
FILES=$(git diff HEAD^ HEAD --name-only --diff-filter=ACM | grep -e '\.py$')
 
for f in $FILES
do
    # auto pep8 correction
    autopep8 --in-place --ignore=E309,E501,W293 $f
done
</pre></div>
</figure><p>All you need to do is install autopep8</p>

<figure class="figure-code code"><figcaption><span>
</span></figcaption><div class="highlight"><pre>pip install autopep8
</pre></div>
</figure><p>and put the post-commit script at <code>.git/hooks/post-commit</code>. In this way, once I do a commit, it will correct PEP8 issues for me. I can review what is modified there, and make another PEP8 correction commit. With this, you can eventually enjoy coding rather than wasting time in removing trailing whitespace everywhere :D</p>