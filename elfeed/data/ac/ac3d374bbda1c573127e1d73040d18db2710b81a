
<p>I used to use the fancy split. Some months ago I reduced my inboxes a
lot and felt fancy split wasn't needed anymore. I ended up with
something like this:</p>

<pre class="src">
(setq nnmail-split-methods
     '((<span style="color: #8b5a00; background-color: #b9babd;">"linux-nantes"</span> <span style="color: #8b5a00; background-color: #b9babd;">"\\([tT]o\\|[cC]c\\):.*linux-nantes@univ-nantes\\.fr"</span>)
       (<span style="color: #8b5a00; background-color: #b9babd;">"bbdb"</span> <span style="color: #8b5a00; background-color: #b9babd;">"\\([tT]o\\|[cC]c\\):.*bbdb-info@lists\\.sourceforge\\.net"</span>)
       (<span style="color: #8b5a00; background-color: #b9babd;">"stumpwm"</span> <span style="color: #8b5a00; background-color: #b9babd;">"\\([tT]o\\|[cC]c\\):.*stumpwm-devel@nongnu\\.org"</span>)
       (<span style="color: #8b5a00; background-color: #b9babd;">"interesting"</span> private-is-email-in-bbdb)
       (<span style="color: #8b5a00; background-color: #b9babd;">"spam"</span> <span style="color: #8b5a00; background-color: #b9babd;">"X-Spam-Flag: YES"</span>)
       (<span style="color: #8b5a00; background-color: #b9babd;">"boring"</span> <span style="color: #8b5a00; background-color: #b9babd;">""</span>)))
</pre>

<p>The idea is to put each mailing list in its separate boxes.
Interesting e-mail are based on my bbdb database queried by the
function <code>private-is-email-in-bbbd</code>.</p>

<p>It worked as I expected except when they were more than one positives. For
example, I had someone I know in my bbdb post to the Linux Nantes mailing
list. What happened is that Gnus will create an e-mail on each inbox!
Clearly that's not what I want.</p>

<p>So I am using again the fancy splitter which does exactly what I
expect. The <code>(|</code> statement indicates to stop a the first positive.</p>

<pre class="src">
(setq nnmail-split-methods 'nnmail-split-fancy
      nnmail-split-fancy
      '(| (to <span style="color: #8b5a00; background-color: #b9babd;">"linux-nantes@univ-nantes\\.fr"</span> <span style="color: #8b5a00; background-color: #b9babd;">"linux-nantes"</span>)
          (to <span style="color: #8b5a00; background-color: #b9babd;">"bbdb-info@lists\\.sourceforge\\.net"</span> <span style="color: #8b5a00; background-color: #b9babd;">"bbdb"</span>)
          (to <span style="color: #8b5a00; background-color: #b9babd;">"stumpwm-devel@nongnu\\.org"</span> <span style="color: #8b5a00; background-color: #b9babd;">"stumpwm"</span>)
          (: private-is-email-in-bbdb)
          (<span style="color: #8b5a00; background-color: #b9babd;">"X-Spam-Flag"</span> <span style="color: #8b5a00; background-color: #b9babd;">"YES"</span> <span style="color: #8b5a00; background-color: #b9babd;">"spam"</span>)
          <span style="color: #8b5a00; background-color: #b9babd;">"boring"</span>))
</pre>

<p>Note that the syntax is much easier to read. There is no hairy regexp
to match <code>To</code> and <code>Cc</code>, all that is handled by the <code>to</code> symbol. I had to
modify <code>private-is-email-in-bbdb</code> to return <code>&quot;interesting&quot;</code> instead of <code>t</code>
on success.</p>

